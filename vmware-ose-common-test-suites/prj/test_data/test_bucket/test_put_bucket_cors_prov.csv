TCID,CaseTitle,Catalog,Priority,Variables,PreCondition,Role,ClientType,AuthSettings,Action,Parameter,ExpectResponseCode,ExpectResponseHeader,ExpectResponseBody,ExpectResponseBodySchema,PostValidation,Cleanup,Description,Comment
TestBucket#test40_test_put_bucket_cors#2,put bucket cors|Bucket - allow origin whitelist,put bucket cors|Bucket,P2,"{'bucket_name': random_bucket_name(), 'default_object_name': 'default_obj', ""cors_rules"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""], ""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}], ""cors_rules_in_get"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""],""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}]}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [200]),(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"":self.variables[""default_object_name""],""Body"":""test""}, [200])]",group1:user1,S3CompatibleAPI,,put_bucket_cors,"{'Bucket': self.variables[""bucket_name""], 'CORSConfiguration': {""CORSRules"":self.variables[""cors_rules""]}}",200,,,,"[(""group1:user1"",""S3CompatibleAPI"",""get_bucket_cors"",{""Bucket"":self.variables[""bucket_name""]},[200],None,None,None,{""CORSRules"":self.variables[""cors_rules_in_get""]},{""properties"":{""CORSRules"":{""items"":{""properties"":{""AllowedMethods"":{""schema"":{""match"":""unordered_equal""}},""AllowedHeaders"":{""schema"":{""match"":""unordered_equal""}},""AllowedOrigins"":{""schema"":{""match"":""unordered_equal""}},""ExposeHeaders"":{""schema"":{""match"":""unordered_equal""}}}},""schema"":{""match"":""unordered_equal""}}}}),(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""get_object"",""CORSHeaders"":{""Origin"":""http://abc.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{'access-control-allow-origin':'http://abc.com'}),(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""head_object"",""CORSHeaders"":{""Origin"":""http://s3.test.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{},{""schema"":{""excludes"":[""access-control-allow-origin"",""access-control-allow-methods""]}}), (""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""head_object"",""CORSHeaders"":{""Origin"":""http://s3.thief.test.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{},{""schema"":{""excludes"":[""access-control-allow-origin"",""access-control-allow-methods""]}}), (""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""get_object"",""CORSHeaders"":{""Origin"":""http://s3.thief.test.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{},{""schema"":{""excludes"":[""access-control-allow-origin"",""access-control-allow-methods""]}})]","[(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [204, 404])]",,
TestBucket#test40_test_put_bucket_cors#3,put bucket cors|ContentMD5,put bucket cors|ContentMD5,P0,"{'bucket_name': random_bucket_name(), 'default_object_name': 'default_obj', ""cors_rules"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""], ""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}], ""cors_rules_in_get"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""],""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}]}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [200]),(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"":self.variables[""default_object_name""],""Body"":""test""}, [200])]",group1:user1,S3CompatibleAPI,,put_bucket_cors,"{""Bucket"":self.variables[""bucket_name""],""CORSConfiguration"":{""CORSRules"":self.variables[""cors_rules""]}, 'ContentMD5': '%s'%calculate_content_md5('<CORSConfiguration xmlns=""http://s3.amazonaws.com/doc/2006-03-01/""><CORSRule><AllowedMethod>PUT</AllowedMethod><AllowedMethod>POST</AllowedMethod><AllowedMethod>DELETE</AllowedMethod><AllowedHeader>Content-Type</AllowedHeader><AllowedOrigin>http://s3.test.com</AllowedOrigin><ExposeHeader>x-amz-server-side-encryption</ExposeHeader><MaxAgeSeconds>0</MaxAgeSeconds></CORSRule><CORSRule><AllowedMethod>GET</AllowedMethod><AllowedHeader>*</AllowedHeader><AllowedOrigin>*</AllowedOrigin><MaxAgeSeconds>3600</MaxAgeSeconds></CORSRule></CORSConfiguration>')}",200,,,,"[(""group1:user1"",""S3CompatibleAPI"",""get_bucket_cors"",{""Bucket"":self.variables[""bucket_name""]},[200],None,None,None,{""CORSRules"":self.variables[""cors_rules_in_get""]},{""properties"":{""CORSRules"":{""items"":{""properties"":{""AllowedMethods"":{""schema"":{""match"":""unordered_equal""}},""AllowedHeaders"":{""schema"":{""match"":""unordered_equal""}},""AllowedOrigins"":{""schema"":{""match"":""unordered_equal""}},""ExposeHeaders"":{""schema"":{""match"":""unordered_equal""}}}},""schema"":{""match"":""unordered_equal""}}}}),[(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""get_object"",""CORSHeaders"":{""Origin"":""http://abc.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{'access-control-allow-origin':'http://abc.com'}),(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""head_object"",""CORSHeaders"":{""Origin"":""http://s3.test.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{},{""schema"":{""excludes"":[""access-control-allow-origin"",""access-control-allow-methods""]}})]]","[(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [204, 404])]",,
TestBucket#test40_test_put_bucket_cors#4,put bucket cors|incorrect ContentMD5,put bucket cors|ContentMD5,P0,"{'bucket_name': random_bucket_name(), 'default_object_name': 'default_obj', ""cors_rules"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""], ""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}], ""cors_rules_in_get"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""],""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}]}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [200]),(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"":self.variables[""default_object_name""],""Body"":""test""}, [200])]",group1:user1,S3CompatibleAPI,,put_bucket_cors,"{""Bucket"":self.variables[""bucket_name""],""CORSConfiguration"":{""CORSRules"":self.variables[""cors_rules""]}, 'ContentMD5': '%s'%calculate_content_md5('<CORSConfiguration xmlns=""http://s3.amazonaws.com/doc/2006-03-01/""><CORSRule><AllowedMethod>PUT?</AllowedMethod><AllowedMethod>POST</AllowedMethod><AllowedMethod>DELETE</AllowedMethod><AllowedHeader>Content-Type</AllowedHeader><AllowedOrigin>http://s3.test.com</AllowedOrigin><ExposeHeader>x-amz-server-side-encryption</ExposeHeader><MaxAgeSeconds>0</MaxAgeSeconds></CORSRule><CORSRule><AllowedMethod>GET</AllowedMethod><AllowedHeader>*</AllowedHeader><AllowedOrigin>*</AllowedOrigin><MaxAgeSeconds>3600</MaxAgeSeconds></CORSRule></CORSConfiguration>')}",400,,"{""Error"": {""Code"": ""BadDigest""}}",,"[(""group1:user1"",""S3CompatibleAPI"",""get_bucket_cors"",{""Bucket"":self.variables[""bucket_name""]},[200],None,None,None,None),(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""get_object"",""CORSHeaders"":{""Origin"":""http://abc.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[403],None,None,{'Error': {'Code': 'CORS_RULE_NOT_MEET'}})]","[(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [204, 404])]",,
TestBucket#test40_test_put_bucket_cors#5,put bucket cors|invalid ContentMD5,put bucket cors|ContentMD5,P0,"{'bucket_name': random_bucket_name(), 'default_object_name': 'default_obj', ""cors_rules"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""], ""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}], ""cors_rules_in_get"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""],""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}]}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [200]),(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"":self.variables[""default_object_name""],""Body"":""test""}, [200])]",group1:user1,S3CompatibleAPI,,put_bucket_cors,"{""Bucket"":self.variables[""bucket_name""],""CORSConfiguration"":{""CORSRules"":self.variables[""cors_rules""]}, 'ContentMD5': '12345654321'}",400,,"{""Error"": {""Code"": ""InvalidDigest""}}",,"[(""group1:user1"",""S3CompatibleAPI"",""get_bucket_cors"",{""Bucket"":self.variables[""bucket_name""]},[200],None,None,None,None),(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""get_object"",""CORSHeaders"":{""Origin"":""http://abc.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[403],None,None,{'Error': {'Code': 'CORS_RULE_NOT_MEET'}})]","[(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [204, 404])]",,
TestBucket#test40_test_put_bucket_cors#6,put bucket cors|Bucket,put bucket cors|Bucket,P0,"{'bucket_name': random_bucket_name(), 'default_object_name': 'default_obj', ""cors_rules"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""], ""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}], ""cors_rules_in_get"":[{""AllowedMethods"":[""PUT"",""POST"",""DELETE""],""AllowedHeaders"":[""Content-Type""],""AllowedOrigins"":[""http://s3.test.com""],""ExposeHeaders"":[""x-amz-server-side-encryption""],""MaxAgeSeconds"":0}, {""AllowedMethods"":[""GET""],""AllowedHeaders"":[""*""],""AllowedOrigins"":[""*""],""MaxAgeSeconds"":3600}]}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [200]),(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"":self.variables[""default_object_name""],""Body"":""test""}, [200])]",group1:user1,S3CompatibleAPI,,put_bucket_cors,"{'Bucket': self.variables[""bucket_name""], 'CORSConfiguration': {""CORSRules"":self.variables[""cors_rules""]}}",200,,,,"[(""group1:user1"",""S3CompatibleAPI"",""get_bucket_cors"",{""Bucket"":self.variables[""bucket_name""]},[200],None,None,None,{""CORSRules"":self.variables[""cors_rules_in_get""]},{""properties"":{""CORSRules"":{""items"":{""properties"":{""AllowedMethods"":{""schema"":{""match"":""unordered_equal""}},""AllowedHeaders"":{""schema"":{""match"":""unordered_equal""}},""AllowedOrigins"":{""schema"":{""match"":""unordered_equal""}},""ExposeHeaders"":{""schema"":{""match"":""unordered_equal""}}}},""schema"":{""match"":""unordered_equal""}}}}),[(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""get_object"",""CORSHeaders"":{""Origin"":""http://abc.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{'access-control-allow-origin':'http://abc.com'}),(""group1:user1"",""S3CompatibleAPI"",""cors_request"",{""Action"":""head_object"",""CORSHeaders"":{""Origin"":""http://s3.test.com""},""Bucket"":self.variables[""bucket_name""],""Key"":self.variables[""default_object_name""]},[200],None,{},{""schema"":{""excludes"":[""access-control-allow-origin"",""access-control-allow-methods""]}})]]","[(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"":self.variables[""bucket_name""]}, [204, 404])]",,