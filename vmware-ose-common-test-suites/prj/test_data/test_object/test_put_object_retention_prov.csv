TCID,CaseTitle,Catalog,Priority,Variables,PreCondition,Role,ClientType,AuthSettings,Action,Parameter,ExpectResponseCode,ExpectResponseHeader,ExpectResponseBody,ExpectResponseBodySchema,PostValidation,Cleanup,Description,Comment
TestObject#test20_put_object_retention#2,put object retention with GOVERNANCE retention mode,put_object_retention|Retention,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention""}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=365)).isoformat()[:-3])}}",200,,,,,"[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#3,put object retention with matched content-md5,put_object_retention|ContentMD5,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention""}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=365)).isoformat()[:-3])}, ""ContentMD5"": calculate_content_md5('<Retention xmlns=""http://s3.amazonaws.com/doc/2006-03-01/""><Mode>GOVERNANCE</Mode><RetainUntilDate>%s000Z</RetainUntilDate></Retention>'%((datetime.datetime.now()+datetime.timedelta(days=365)).isoformat()[:-3]))}",200,,,,,"[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#4,put object retention with mismatched content-md5,put_object_retention|ContentMD5,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention""}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=365)).isoformat()[:-3])}, ""ContentMD5"": calculate_content_md5('mismatched')}",400,,"{'Error': {'details': {'CalculatedDigest': str, 'ExpectedDigest': '%s'%calculate_content_md5('mismatched')}, 'Status': '400', 'Code': 'BadDigest', 'Message': str, 'Resource': str}}",,,"[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#5,change object retention mode from Governance to No Retention mode(BypassGovernanceRetention=true),put_object_retention|BypassGovernanceRetention,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention""}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=1)).isoformat()[:-3])}}, [200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}}",200,,,,"[(""group1:user1"", ""S3CompatibleAPI"", ""get_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [404], None, None, None, {'Error': {'Status': '404', 'Code': 'NoSuchObjectLockConfiguration', 'Message': str, 'Resource': str}})]
","[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#6,change object retention mode from Governance to No Retention mode(BypassGovernanceRetention=false),put_object_retention|BypassGovernanceRetention,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention""}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=1)).isoformat()[:-3])}}, [200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": False, ""Retention"":{}}",403,,"{'Error': {'Status': '403', 'Code': 'ObjectLockAccessDenied', 'Message': str, 'Resource': str}}",,"[(""group1:user1"", ""S3CompatibleAPI"", ""get_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""]}, [200], None, None, None, {'Retention': {'Mode': 'GOVERNANCE', 'RetainUntilDate': datetime.datetime}})]
","[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#7,put object retention to current object version with version id,put_object_retention|VersionId,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention.%s""%random_bucket_name()}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_bucket_versioning"", {""Bucket"":self.variables[""bucket_name""],""VersioningConfiguration"":{""Status"":""Enabled""}}, [200]),
(""group1:user1"",""S3CompatibleAPI"",""put_object"",{""Bucket"":self.variables[""bucket_name""],""Key"":self.variables['object_name'],""Body"":""test-v1"",""ContentType"":'text/plain'},[200]),
(""group1:user1"",""S3CompatibleAPI"",""put_object"",{""Bucket"":self.variables[""bucket_name""],""Key"":self.variables['object_name'],""Body"":""test-v2"",""ContentType"":'text/plain'},[200]),
(""group1:user1"",""S3CompatibleAPI"",""list_object_versions"",{""Bucket"":self.variables[""bucket_name""]},[200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=365)).isoformat()[:-3])}, ""VersionId"":self.global_variables[self.variables['object_name']+'_versions_v1'][0]}",200,,,,,"[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}, ""VersionId"":self.global_variables[self.variables['object_name']+'_versions_v1'][0]}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#8,put object retention to previous object version,put_object_retention|VersionId,P0,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention.%s""%random_bucket_name()}","[(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":self.variables[""bucket_name""], ""ObjectLockEnabledForBucket"": True}, [200, 409]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_bucket_versioning"", {""Bucket"":self.variables[""bucket_name""],""VersioningConfiguration"":{""Status"":""Enabled""}}, [200]),
(""group1:user1"",""S3CompatibleAPI"",""put_object"",{""Bucket"":self.variables[""bucket_name""],""Key"":self.variables['object_name'],""Body"":""test-v1"",""ContentType"":'text/plain'},[200]),
(""group1:user1"",""S3CompatibleAPI"",""put_object"",{""Bucket"":self.variables[""bucket_name""],""Key"":self.variables['object_name'],""Body"":""test-v2"",""ContentType"":'text/plain'},[200]),
(""group1:user1"",""S3CompatibleAPI"",""list_object_versions"",{""Bucket"":self.variables[""bucket_name""]},[200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""Retention"":{""Mode"":""GOVERNANCE"", ""RetainUntilDate"":""%sZ""%((datetime.datetime.now()+datetime.timedelta(days=365)).isoformat()[:-3])}, ""VersionId"":self.global_variables[self.variables['object_name']+'_versions_v1'][1]}",200,,,,,"[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}, ""VersionId"":self.global_variables[self.variables['object_name']+'_versions_v1'][1]}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,
TestObject#test20_put_object_retention#9,put_object_retention|RequestPayer,put_object_retention|RequestPayer,P3,"{""bucket_name"": ""obj-retention.%s""%random_bucket_name(),
""object_name"":""obj-retention""}","[(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"":""self.variables[""bucket_name""]""}, [204, 404]),
(""group1:user1"", ""S3CompatibleAPI"", ""create_bucket"", {""Bucket"":""self.variables[""bucket_name""]""}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""put_object"", {""Bucket"":""self.variables[""bucket_name""]"", ""Key"":""obj-default"", ""Body"":""Test""}, [200])]",group1:user1,S3CompatibleAPI,,put_object_retention,"{'Bucket': 'self.variables[""bucket_name""]', 'Key': 'test-obj-1', 'RequestPayer': 'TODO'}",200,,,,,"[(""group1:user1"", ""S3CompatibleAPI"", ""put_object_retention"", {""Bucket"":self.variables[""bucket_name""], ""Key"": self.variables[""object_name""], ""BypassGovernanceRetention"": True, ""Retention"":{}, ""VersionId"":self.global_variables[self.variables['object_name']+'_versions_v1'][1]}, [200]),
(""group1:user1"", ""S3CompatibleAPI"", ""force_delete_bucket"", {""Bucket"": self.variables[""bucket_name""]}, [204, 404])]",,Only support by AWS